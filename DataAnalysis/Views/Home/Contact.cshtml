@{
    ViewBag.Title = "Contact";
    Layout = "~/Views/Shared/_layout.cshtml";
}
@section Style{
    <link href="~/Scripts/leaflet/leaflet.css" rel="stylesheet" />
}
<div class="layui-fluid">
    <div class="layui-row layui-col-space15">
        <div class="layui-card">
            <div class="layui-card-header">地图</div>
            <div class="layui-card-body">
                <div class="col-xs-12" id="mapDiv" style="height:600px"></div>
            </div>
        </div>
    </div>
</div>

@section Script{

    <script src="~/Scripts/leaflet/leaflet.js"></script>
    <script>
        layui.use(['element','layer'], function () {
        const urlTemplate = {
            //在mapbox自定义的影像地图
            mapbox_Image: "https://api.mapbox.com/styles/v1/yqcim/cizh1ma3400ez2so5x1anhuzo/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoieXFjaW0iLCJhIjoiY2l6ZmhnZjExMDBhajJ4cGxnNGN5MnhpdCJ9.pcZtdfk8mSFboCdwqkvW6g",
            //在mapbox自定义的矢量地图
            mapbox_Vector: "https://api.mapbox.com/styles/v1/liuvigongzuoshi/cjbf0ypqz8wp62ro6iayiivzy/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibGl1dmlnb25nenVvc2hpIiwiYSI6ImNqYmYwd24wczJyd24yeGxsMWE5bGpxaGkifQ.CVKELjW5ASK8EnQfQCbxFw",
            //在mapbox地图接口
            mapbox_url: 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw',
        }

        const map = L.map("mapDiv", {
            zoomControl: true,
            attributionControl: true,

        }).setView([29.849167, 121.669444], 12);
        let Baselayer = L.tileLayer(urlTemplate.mapbox_url, {
            maxZoom: 17, //最大视图
            minZoom: 2, //最小视图
            id: 'mapbox.streets',
        }).addTo(map);


        var marker = L.marker([29.859167, 121.669444], {
        }).addTo(map).on("click", function (e) { layui.layer.msg(e.target._tooltip._content) })
            .bindTooltip("test", {
                permanent: true,
                offset: [0, 0],// 偏移
                direction: "right",// 放置位置
                // sticky:true,//是否标记在点上面
                className: 'anim-tooltip',// CSS控制
            }).openTooltip();

        var marker = L.marker([29.859167, 121.656554], {
        }).addTo(map).on("click", function (e) { console.log(e) })
            .bindTooltip("test2", {
                permanent: true,
                offset: [0, 0],// 偏移
                direction: "right",// 放置位置
                // sticky:true,//是否标记在点上面
                className: 'anim-tooltip',// CSS控制
            }).openTooltip().on('popupopen', function (e) {
                console.log(e)
            });

        var btn = document.querySelector("#test");
        })
        function getLocation() {
            alert(1)
            if (navigator.geolocation) {
                var position = navigator.geolocation.getCurrentPosition(showPosition, err);
                //showPosition(position);

            }
            else { alert("Geolocation is not supported by this browser."); }
        }
        function showPosition(x) {
            console.log(x)
        }
        function err() {
            alert(2)
        }
    </script>
}
