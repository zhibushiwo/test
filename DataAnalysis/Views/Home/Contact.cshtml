@{
    ViewBag.Title = "Contact";
}
@section Style{
    @*<link href="~/Scripts/leaflet/leaflet.css" rel="stylesheet" />*@
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
          integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
          crossorigin="" />
}
    <button type="button" id="test" onclick="getLocation()">123</button>
<div class="container-fluid">
    <div class="row">
        <div class="col-xs-12" id="mapDiv" style="position: absolute;top: 53px;bottom: 0;z-index:1;width:1000px;height:600px"></div>
        <!-- 地图面板 -->
        <!--底部状态栏部分 -->
    </div>
</div>

@section Script{

    @*<script src="~/Scripts/leaflet/leaflet.js"></script>*@
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
            integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
            crossorigin=""></script>
    <script>
        const urlTemplate = {
            //在mapbox自定义的影像地图
            mapbox_Image: "https://api.mapbox.com/styles/v1/yqcim/cizh1ma3400ez2so5x1anhuzo/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoieXFjaW0iLCJhIjoiY2l6ZmhnZjExMDBhajJ4cGxnNGN5MnhpdCJ9.pcZtdfk8mSFboCdwqkvW6g",
            //在mapbox自定义的矢量地图
            mapbox_Vector: "https://api.mapbox.com/styles/v1/liuvigongzuoshi/cjbf0ypqz8wp62ro6iayiivzy/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibGl1dmlnb25nenVvc2hpIiwiYSI6ImNqYmYwd24wczJyd24yeGxsMWE5bGpxaGkifQ.CVKELjW5ASK8EnQfQCbxFw",
            //在mapbox地图接口
            mapbox_url: 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw',
            // 影像地图
            SYS_CQMap_IMG_MAPSERVER_PATH: "http://www.cqzhsq.cn:8070/services/RES_SGHJH/zqsyxt/SfX9OrRJmFf1oU4uoMXlOw",
            // 影像注记
            SYS_CQMap_IMG_LABEL_MAPSERVER_PATH: "http://www.cqzhsq.cn:8092/RemoteRest/services/CQMap_IMG_LABEL/MapServer",
            // 矢量地图
            SYS_CQMap_VEC_MAPSERVER_PATH: "http://www.cqzhsq.cn:8070/services/RES_SGHJR/zqsslt/SfX9OrRJmFf1oU4uoMXlOw",
            // 地形地图
            SYS_CQMap_DEM_MAPSERVER_PATH: "http://www.cqzhsq.cn:8070/services/RES_SGHJXU/zqsyt/SfX9OrRJmFf1oU4uoMXlOw"
        }

        const map = L.map("mapDiv", {
            zoomControl: true,
            attributionControl: true,
           
        }).setView([29.849167, 121.669444], 12); 
        let Baselayer = L.tileLayer(urlTemplate.mapbox_url, {
            maxZoom: 17, //最大视图
            minZoom: 2, //最小视图
            id: 'mapbox.streets',
        }).addTo(map);


        var marker = L.marker([29.859167, 121.669444], {
        }).addTo(map).on("click", function (e) { console.log(e) })
            .bindTooltip("test", {
                permanent: true,
                offset: [0, 0],// 偏移
                direction: "right",// 放置位置
                // sticky:true,//是否标记在点上面
                className: 'anim-tooltip',// CSS控制
            }).openTooltip();

        var marker = L.marker([29.859167, 121.656554], {
        }).addTo(map).on("click", function (e) { console.log(e) })
            .bindTooltip("test2", {
                permanent: true,
                offset: [0, 0],// 偏移
                direction: "right",// 放置位置
                // sticky:true,//是否标记在点上面
                className: 'anim-tooltip',// CSS控制
            }).openTooltip();
        
        var btn = document.querySelector("#test");
      
        function getLocation() {
            alert(1)
            if (navigator.geolocation) {
                var position = navigator.geolocation.getCurrentPosition(showPosition,err);
                //showPosition(position);

            }
            else { alert ("Geolocation is not supported by this browser."); }
        }
        function showPosition(x) {
            console.log(x)
        }
        function err() {
            alert(2)
        }
    </script>
}